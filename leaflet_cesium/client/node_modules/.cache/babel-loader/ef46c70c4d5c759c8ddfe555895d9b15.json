{"ast":null,"code":"var _jsxFileName = \"/home/usuario/davi/thalamus/wms/3dmaptestes/leaflet_cesium/client/src/map/drawable_map3d.jsx\";\nimport * as Cesium from 'cesium';\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Map3D extends React.Component {\n  componentDidMount() {\n    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkMTYwYTk1ZC00ZTQ5LTQxMmEtYjQyZi01YTgyMDRkNzkxMzQiLCJpZCI6NDU2NjksImlhdCI6MTYxNTMxMjMyN30.6Vqvf-4RtrFxzGFkdoAxokmcWWRkwsc7gw9-yBQL4S4';\n    const viewer = new Cesium.Viewer('map3d', {\n      terrainProvider: Cesium.createWorldTerrain()\n    });\n    viewer.shadows = true;\n    viewer.scene.primitives.add(Cesium.createOsmBuildings());\n    viewer.camera.flyTo({\n      destination: Cesium.Cartesian3.fromDegrees(-21.938068, 64.128000, 400)\n      /* orientation : {\n        heading : Cesium.Math.toRadians(0.0),\n        pitch : Cesium.Math.toRadians(-15.0),\n      } */\n\n    });\n    viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);\n    viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n    function createPoint(worldPosition) {\n      return viewer.entities.add({\n        position: worldPosition,\n        point: {\n          color: Cesium.Color.WHITE,\n          pixelSize: 5,\n          heightReference: Cesium.HeightReference.CLAMP_TO_GROUND\n        }\n      });\n    }\n\n    function drawShape(positionData) {\n      return viewer.entities.add({\n        polyline: {\n          positions: positionData,\n          clampToGround: true,\n          width: 3\n        }\n      });\n    }\n\n    var activeShapePoints = [];\n    var floatingPoint;\n    var handler = new Cesium.ScreenSpaceEventHandler(viewer.canvas);\n\n    function drawEarthShape(position) {\n      var earthPosition = viewer.scene.pickPosition(position);\n      console.log(activeShapePoints);\n\n      if (Cesium.defined(earthPosition)) {\n        if (activeShapePoints.length === 0) {\n          floatingPoint = createPoint(earthPosition);\n          activeShapePoints.push(earthPosition);\n          var dynamicPositions = new Cesium.CallbackProperty(function () {\n            return activeShapePoints;\n          }, false);\n          drawShape(dynamicPositions);\n        }\n\n        activeShapePoints.push(earthPosition);\n        createPoint(earthPosition);\n      }\n    }\n\n    function terminateShape() {\n      activeShapePoints.pop();\n      drawShape(activeShapePoints);\n      viewer.entities.remove(floatingPoint);\n      floatingPoint = undefined;\n      activeShapePoints = [];\n    } //bind mouse move\n\n\n    handler.setInputAction(function (event) {\n      if (Cesium.defined(floatingPoint)) {\n        var newPosition = viewer.scene.pickPosition(event.endPosition);\n\n        if (Cesium.defined(newPosition)) {\n          floatingPoint.position.setValue(newPosition);\n          activeShapePoints.pop();\n          activeShapePoints.push(newPosition);\n        }\n      }\n    }, Cesium.ScreenSpaceEventType.MOUSE_MOVE); //bind left click\n\n    handler.setInputAction(function (event) {\n      drawEarthShape(event.position);\n    }, Cesium.ScreenSpaceEventType.LEFT_CLICK); //bind right click\n\n    handler.setInputAction(function () {\n      terminateShape();\n    }, Cesium.ScreenSpaceEventType.RIGHT_CLICK);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: \"54vh\",\n        width: \"50%\"\n      },\n      id: \"map3d\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 16\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/usuario/davi/thalamus/wms/3dmaptestes/leaflet_cesium/client/src/map/drawable_map3d.jsx"],"names":["Cesium","React","Map3D","Component","componentDidMount","Ion","defaultAccessToken","viewer","Viewer","terrainProvider","createWorldTerrain","shadows","scene","primitives","add","createOsmBuildings","camera","flyTo","destination","Cartesian3","fromDegrees","cesiumWidget","screenSpaceEventHandler","removeInputAction","ScreenSpaceEventType","LEFT_DOUBLE_CLICK","LEFT_CLICK","createPoint","worldPosition","entities","position","point","color","Color","WHITE","pixelSize","heightReference","HeightReference","CLAMP_TO_GROUND","drawShape","positionData","polyline","positions","clampToGround","width","activeShapePoints","floatingPoint","handler","ScreenSpaceEventHandler","canvas","drawEarthShape","earthPosition","pickPosition","console","log","defined","length","push","dynamicPositions","CallbackProperty","terminateShape","pop","remove","undefined","setInputAction","event","newPosition","endPosition","setValue","MOUSE_MOVE","RIGHT_CLICK","render","height"],"mappings":"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","sourcesContent":["import * as Cesium from 'cesium';\nimport React from 'react';\n\nexport default class Map3D extends React.Component {\n    componentDidMount(){\n        Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkMTYwYTk1ZC00ZTQ5LTQxMmEtYjQyZi01YTgyMDRkNzkxMzQiLCJpZCI6NDU2NjksImlhdCI6MTYxNTMxMjMyN30.6Vqvf-4RtrFxzGFkdoAxokmcWWRkwsc7gw9-yBQL4S4';\n        \n        const viewer = new Cesium.Viewer('map3d', {\n            terrainProvider: Cesium.createWorldTerrain(),\n        });    \n\n        viewer.shadows = true;\n        viewer.scene.primitives.add(Cesium.createOsmBuildings());   \n\n        viewer.camera.flyTo({\n          destination : Cesium.Cartesian3.fromDegrees(-21.938068, 64.128000, 400),\n          /* orientation : {\n            heading : Cesium.Math.toRadians(0.0),\n            pitch : Cesium.Math.toRadians(-15.0),\n          } */\n        });\n\n        viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(\n            Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK\n        );\n\n        viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(\n            Cesium.ScreenSpaceEventType.LEFT_CLICK\n        );\n\n        function createPoint(worldPosition) {\n            return viewer.entities.add({\n                position: worldPosition,\n                point: {\n                    color: Cesium.Color.WHITE,\n                    pixelSize: 5,\n                    heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                },\n            });\n        }\n\n        function drawShape(positionData) {\n            return viewer.entities.add({\n                polyline: {\n                    positions: positionData,\n                    clampToGround: true,\n                    width: 3,\n                },\n            });\n        }\n\n        var activeShapePoints = [];\n        var floatingPoint;\n        var handler = new Cesium.ScreenSpaceEventHandler(viewer.canvas);\n\n        function drawEarthShape(position){\n            var earthPosition = viewer.scene.pickPosition(position);\n            console.log(activeShapePoints)\n            if (Cesium.defined(earthPosition)) {\n                if (activeShapePoints.length === 0) {\n                    floatingPoint = createPoint(earthPosition);\n                    activeShapePoints.push(earthPosition);\n                    var dynamicPositions = new Cesium.CallbackProperty(function () {\n                        return activeShapePoints;\n                    }, false);\n                    drawShape(dynamicPositions);\n                }\n                activeShapePoints.push(earthPosition);\n                createPoint(earthPosition);\n            }\n        }\n        \n        function terminateShape() {\n            activeShapePoints.pop();\n            drawShape(activeShapePoints);\n            viewer.entities.remove(floatingPoint);\n            floatingPoint = undefined;\n            activeShapePoints = [];\n        }\n\n        //bind mouse move\n        handler.setInputAction(function (event) {\n            if (Cesium.defined(floatingPoint)) {\n                var newPosition = viewer.scene.pickPosition(event.endPosition);\n                if (Cesium.defined(newPosition)) {\n                    floatingPoint.position.setValue(newPosition);\n                    activeShapePoints.pop();\n                    activeShapePoints.push(newPosition);\n                }\n            }\n        }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n        \n        //bind left click\n        handler.setInputAction(function (event) {\n            drawEarthShape(event.position)\n        }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n        //bind right click\n        handler.setInputAction(function () {\n            terminateShape();\n        }, Cesium.ScreenSpaceEventType.RIGHT_CLICK);\n    }\n\n    render(){\n        return <div style={{height: \"54vh\", width: \"50%\"}} id=\"map3d\"/>\n    }\n}"]},"metadata":{},"sourceType":"module"}