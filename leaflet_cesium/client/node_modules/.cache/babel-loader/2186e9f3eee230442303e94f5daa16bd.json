{"ast":null,"code":"import defined from \"../Core/defined.js\";\n/**\n * @private\n */\n\nfunction Cesium3DTileStyleEngine() {\n  this._style = undefined; // The style provided by the user\n\n  this._styleDirty = false; // true when the style is reassigned\n\n  this._lastStyleTime = 0; // The \"time\" when the last style was assigned\n}\n\nObject.defineProperties(Cesium3DTileStyleEngine.prototype, {\n  style: {\n    get: function () {\n      return this._style;\n    },\n    set: function (value) {\n      if (value === this._style) {\n        return;\n      }\n\n      this._style = value;\n      this._styleDirty = true;\n    }\n  }\n});\n\nCesium3DTileStyleEngine.prototype.makeDirty = function () {\n  this._styleDirty = true;\n};\n\nCesium3DTileStyleEngine.prototype.resetDirty = function () {\n  this._styleDirty = false;\n};\n\nCesium3DTileStyleEngine.prototype.applyStyle = function (tileset) {\n  if (!tileset.ready) {\n    return;\n  }\n\n  if (defined(this._style) && !this._style.ready) {\n    return;\n  }\n\n  var styleDirty = this._styleDirty;\n\n  if (styleDirty) {\n    // Increase \"time\", so the style is applied to all visible tiles\n    ++this._lastStyleTime;\n  }\n\n  var lastStyleTime = this._lastStyleTime;\n  var statistics = tileset._statistics; // If a new style was assigned, loop through all the visible tiles; otherwise, loop through\n  // only the tiles that are newly visible, i.e., they are visible this frame, but were not\n  // visible last frame.  In many cases, the newly selected tiles list will be short or empty.\n\n  var tiles = styleDirty ? tileset._selectedTiles : tileset._selectedTilesToStyle; // PERFORMANCE_IDEA: does mouse-over picking basically trash this?  We need to style on\n  // pick, for example, because a feature's show may be false.\n\n  var length = tiles.length;\n\n  for (var i = 0; i < length; ++i) {\n    var tile = tiles[i];\n\n    if (tile.lastStyleTime !== lastStyleTime) {\n      // Apply the style to this tile if it wasn't already applied because:\n      //   1) the user assigned a new style to the tileset\n      //   2) this tile is now visible, but it wasn't visible when the style was first assigned\n      var content = tile.content;\n      tile.lastStyleTime = lastStyleTime;\n      content.applyStyle(this._style);\n      statistics.numberOfFeaturesStyled += content.featuresLength;\n      ++statistics.numberOfTilesStyled;\n    }\n  }\n};\n\nexport default Cesium3DTileStyleEngine;","map":{"version":3,"sources":["/home/usuario/davi/thalamus/wms/3dmaptestes/leaflet_cesium/client/node_modules/cesium/Source/Scene/Cesium3DTileStyleEngine.js"],"names":["defined","Cesium3DTileStyleEngine","_style","undefined","_styleDirty","_lastStyleTime","Object","defineProperties","prototype","style","get","set","value","makeDirty","resetDirty","applyStyle","tileset","ready","styleDirty","lastStyleTime","statistics","_statistics","tiles","_selectedTiles","_selectedTilesToStyle","length","i","tile","content","numberOfFeaturesStyled","featuresLength","numberOfTilesStyled"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,oBAApB;AAEA;AACA;AACA;;AACA,SAASC,uBAAT,GAAmC;AACjC,OAAKC,MAAL,GAAcC,SAAd,CADiC,CACR;;AACzB,OAAKC,WAAL,GAAmB,KAAnB,CAFiC,CAEP;;AAC1B,OAAKC,cAAL,GAAsB,CAAtB,CAHiC,CAGR;AAC1B;;AAEDC,MAAM,CAACC,gBAAP,CAAwBN,uBAAuB,CAACO,SAAhD,EAA2D;AACzDC,EAAAA,KAAK,EAAE;AACLC,IAAAA,GAAG,EAAE,YAAY;AACf,aAAO,KAAKR,MAAZ;AACD,KAHI;AAILS,IAAAA,GAAG,EAAE,UAAUC,KAAV,EAAiB;AACpB,UAAIA,KAAK,KAAK,KAAKV,MAAnB,EAA2B;AACzB;AACD;;AACD,WAAKA,MAAL,GAAcU,KAAd;AACA,WAAKR,WAAL,GAAmB,IAAnB;AACD;AAVI;AADkD,CAA3D;;AAeAH,uBAAuB,CAACO,SAAxB,CAAkCK,SAAlC,GAA8C,YAAY;AACxD,OAAKT,WAAL,GAAmB,IAAnB;AACD,CAFD;;AAIAH,uBAAuB,CAACO,SAAxB,CAAkCM,UAAlC,GAA+C,YAAY;AACzD,OAAKV,WAAL,GAAmB,KAAnB;AACD,CAFD;;AAIAH,uBAAuB,CAACO,SAAxB,CAAkCO,UAAlC,GAA+C,UAAUC,OAAV,EAAmB;AAChE,MAAI,CAACA,OAAO,CAACC,KAAb,EAAoB;AAClB;AACD;;AAED,MAAIjB,OAAO,CAAC,KAAKE,MAAN,CAAP,IAAwB,CAAC,KAAKA,MAAL,CAAYe,KAAzC,EAAgD;AAC9C;AACD;;AAED,MAAIC,UAAU,GAAG,KAAKd,WAAtB;;AAEA,MAAIc,UAAJ,EAAgB;AACd;AACA,MAAE,KAAKb,cAAP;AACD;;AAED,MAAIc,aAAa,GAAG,KAAKd,cAAzB;AACA,MAAIe,UAAU,GAAGJ,OAAO,CAACK,WAAzB,CAjBgE,CAmBhE;AACA;AACA;;AACA,MAAIC,KAAK,GAAGJ,UAAU,GAClBF,OAAO,CAACO,cADU,GAElBP,OAAO,CAACQ,qBAFZ,CAtBgE,CAyBhE;AACA;;AAEA,MAAIC,MAAM,GAAGH,KAAK,CAACG,MAAnB;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAApB,EAA4B,EAAEC,CAA9B,EAAiC;AAC/B,QAAIC,IAAI,GAAGL,KAAK,CAACI,CAAD,CAAhB;;AACA,QAAIC,IAAI,CAACR,aAAL,KAAuBA,aAA3B,EAA0C;AACxC;AACA;AACA;AACA,UAAIS,OAAO,GAAGD,IAAI,CAACC,OAAnB;AACAD,MAAAA,IAAI,CAACR,aAAL,GAAqBA,aAArB;AACAS,MAAAA,OAAO,CAACb,UAAR,CAAmB,KAAKb,MAAxB;AACAkB,MAAAA,UAAU,CAACS,sBAAX,IAAqCD,OAAO,CAACE,cAA7C;AACA,QAAEV,UAAU,CAACW,mBAAb;AACD;AACF;AACF,CA1CD;;AA2CA,eAAe9B,uBAAf","sourcesContent":["import defined from \"../Core/defined.js\";\n\n/**\n * @private\n */\nfunction Cesium3DTileStyleEngine() {\n  this._style = undefined; // The style provided by the user\n  this._styleDirty = false; // true when the style is reassigned\n  this._lastStyleTime = 0; // The \"time\" when the last style was assigned\n}\n\nObject.defineProperties(Cesium3DTileStyleEngine.prototype, {\n  style: {\n    get: function () {\n      return this._style;\n    },\n    set: function (value) {\n      if (value === this._style) {\n        return;\n      }\n      this._style = value;\n      this._styleDirty = true;\n    },\n  },\n});\n\nCesium3DTileStyleEngine.prototype.makeDirty = function () {\n  this._styleDirty = true;\n};\n\nCesium3DTileStyleEngine.prototype.resetDirty = function () {\n  this._styleDirty = false;\n};\n\nCesium3DTileStyleEngine.prototype.applyStyle = function (tileset) {\n  if (!tileset.ready) {\n    return;\n  }\n\n  if (defined(this._style) && !this._style.ready) {\n    return;\n  }\n\n  var styleDirty = this._styleDirty;\n\n  if (styleDirty) {\n    // Increase \"time\", so the style is applied to all visible tiles\n    ++this._lastStyleTime;\n  }\n\n  var lastStyleTime = this._lastStyleTime;\n  var statistics = tileset._statistics;\n\n  // If a new style was assigned, loop through all the visible tiles; otherwise, loop through\n  // only the tiles that are newly visible, i.e., they are visible this frame, but were not\n  // visible last frame.  In many cases, the newly selected tiles list will be short or empty.\n  var tiles = styleDirty\n    ? tileset._selectedTiles\n    : tileset._selectedTilesToStyle;\n  // PERFORMANCE_IDEA: does mouse-over picking basically trash this?  We need to style on\n  // pick, for example, because a feature's show may be false.\n\n  var length = tiles.length;\n  for (var i = 0; i < length; ++i) {\n    var tile = tiles[i];\n    if (tile.lastStyleTime !== lastStyleTime) {\n      // Apply the style to this tile if it wasn't already applied because:\n      //   1) the user assigned a new style to the tileset\n      //   2) this tile is now visible, but it wasn't visible when the style was first assigned\n      var content = tile.content;\n      tile.lastStyleTime = lastStyleTime;\n      content.applyStyle(this._style);\n      statistics.numberOfFeaturesStyled += content.featuresLength;\n      ++statistics.numberOfTilesStyled;\n    }\n  }\n};\nexport default Cesium3DTileStyleEngine;\n"]},"metadata":{},"sourceType":"module"}